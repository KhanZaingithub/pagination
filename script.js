let category = [
  {
    name: "Fashion",
    ImgURL: "https://www.svgrepo.com/show/258165/shirt-men.svg",
  },
  {
    name: "Electronics",
    ImgURL: "https://www.svgrepo.com/show/355475/laptop.svg",
  },
  {
    name: "TVs & Appliances",
    ImgURL: "https://www.svgrepo.com/show/375922/tv.svg",
  },
  {
    name: "Mobiles & Tablets",
    ImgURL: "https://www.svgrepo.com/show/491979/mobile-phone-recharge.svg",
  },
];

let items = [
  {
    Name: "APPLE iPhone 14 Plus (Blue, 128 GB)",
    Category: "Mobiles & Tablets",
    ImgURL:
      "https://rukminim2.flixcart.com/image/312/312/xif0q/mobile/c/4/d/-original-imaghx9qygjjg8hz.jpeg?q=70",
    Price: 63999,
  },
  {
    Name: "OnePlus Nord CE 2 Lite 5G (Blue Tide, 128 GB)  (6 GB RAM)",
    Category: "Mobiles & Tablets",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/mobile/k/w/k/-original-imagg2abzhxjckxu.jpeg?q=70",
    Price: 17129,
  },
  {
    Name: "vivo T2 Pro 5G (New Moon Black, 256 GB)  (8 GB RAM)",
    Category: "Mobiles & Tablets",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/mobile/g/b/x/-original-imagtt4h4ptmxgwn.jpeg?q=70",
    Price: 24999,
  },
  {
    Name: "POCO X5 5G (Wildcat Blue, 256 GB)  (8 GB RAM)",
    Category: "Mobiles & Tablets",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/mobile/f/e/l/-original-imagnqpndcmxghyq.jpeg?q=70",
    Price: 14999,
  },
  {
    Name: "SAMSUNG Galaxy F34 5G (Orchid Violet, 128 GB)  (8 GB RAM)",
    Category: "Mobiles & Tablets",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/mobile/r/k/x/-original-imagtrrqkxprtd4n.jpeg?q=70",
    Price: 18499,
  },
  {
    Name: "Men Regular, Super Slim Fit Striped Ribbed Collar Casual Shirt",
    Category: "Fashion",
    ImgURL:
      "https://rukminim2.flixcart.com/image/612/612/xif0q/shirt/p/x/f/xxl-ms6089-6094-leriya-fashion-original-imagzhkhes55batr.jpeg?q=70",
    Price: 589,
  },
  {
    Name: "Men Regular Fit Graphic Print Button Down Collar Casual Shirt",
    Category: "Fashion",
    ImgURL:
      "https://rukminim2.flixcart.com/image/612/612/xif0q/shirt/4/m/3/s-sp-003-floura-original-imagk7hg4hezkdtz.jpeg?q=70",
    Price: 498,
  },
  {
    Name: "Men Regular, Slim Fit Graphic Print Ribbed Collar Casual Shirt",
    Category: "Fashion",
    ImgURL:
      "https://rukminim2.flixcart.com/image/832/832/xif0q/shirt/e/4/a/s-fi-coco-bar-fitoda-fashion-original-imagkw42agug3xhh.jpeg?q=70",
    Price: 400,
  },
  {
    Name: "Men Regular Fit Printed Mandarin Collar Casual Shirt",
    Category: "Fashion",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/shirt/1/j/p/xl-ms6059-6063-leriya-fashion-original-imagzybbqtcahuff.jpeg?q=70",
    Price: 300,
  },
  {
    Name: "Men Regular Fit Graphic Print Spread Collar Casual Shirt",
    Category: "Fashion",
    ImgURL:
      "https://rukminim2.flixcart.com/image/832/832/xif0q/shirt/y/h/m/s-ms6089-6094-leriya-fashion-original-imagzhkhfg2fpjmz.jpeg?q=70",
    Price: 600,
  },
  {
    Name: "Mi A series 80 cm (32 inch) HD Ready LED Smart Google TV 2023",
    Category: "TVs & Appliances",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/television/b/s/o/-original-imagt86kchfhpwgz.jpeg?q=70",
    Price: 12999,
  },
  {
    Name: "BeethoSOL 80 cm (32 inch) HD Ready LED Smart Android Based TV",
    Category: "TVs & Appliances",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/television/e/2/w/-original-imagsn6dxk2ha2en.jpeg?q=70",
    Price: 15000,
  },
  {
    Name: "SAMSUNG 80 cm (32 Inch) HD Ready LED Smart Tizen TV 2022 ",
    Category: "TVs & Appliances",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/television/x/8/a/-original-imagttjpuyzsbzud.jpeg?q=70",
    Price: 10999,
  },
  {
    Name: "SAMSUNG Crystal 4K iSmart Series 108 cm (43 inch) Ultra HD (4K)",
    Category: "TVs & Appliances",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/television/x/r/n/-original-imagttjpgtshmnms.jpeg?q=70",
    Price: 12999,
  },
  {
    Name: "Dyanora 60 cm (24 inch) HD Ready LED TV",
    Category: "TVs & Appliances",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/l4ssfww0/television/8/1/x/-original-imagfm4bjkgbzxky.jpeg?q=70",
    Price: 5999,
  },
  {
    Name: "Lenovo IdeaPad 1 Athlon Dual Core 7120U",
    Category: "Electronics",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/computer/n/i/e/15amn7-thin-and-light-laptop-lenovo-original-imagsvykgkecffgr.jpeg?q=70",
    Price: 26990,
  },
  {
    Name: "ASUS Chromebook Celeron Dual Core N4500",
    Category: "Electronics",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/computer/c/l/t/-original-imagtucmkuwggepy.jpeg?q=70",
    Price: 15990,
  },
  {
    Name: "ASUS Vivobook 15 Core i5 11th Gen 1135G7",
    Category: "Electronics",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/computer/c/l/t/-original-imagtucmkuwggepy.jpeg?q=70",
    Price: 38990,
  },
  {
    Name: "ASUS Vivobook 14 Core i3 11th Gen 1115G4",
    Category: "Electronics",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/computer/z/b/c/-original-imagtucnf8mszzhy.jpeg?q=70",
    Price: 30990,
  },
  {
    Name: "Primebook S Wifi MT8183",
    Category: "Electronics",
    ImgURL:
      "https://rukminim2.flixcart.com/image/416/416/xif0q/computer/5/c/5/-original-imagtrj27kprghgz.jpeg?q=70",
    Price: 12990,
  },
];

let paginationArray = [];

let showItems = 4;

let catElement = document.querySelector(".cat");

let itemsBoxElement = document.querySelector(".items-box");

let paginationBoxElement = document.querySelector(".pagination-box");

let page;

let pageBtn;

let prevBtn;

let nextBtn;

let paginationCounter = 1;

CategoryHTML();

showProductsInsertValue("Fashion");

cratePaginationHTML(paginationArray.length);

let categoryBox = document.querySelectorAll(".cat-box");

categoryBox[0].style.color = "red";

for (let i = 0; i < categoryBox.length; i++) {
  categoryBox[i].addEventListener("click", function () {
    paginationCounter = 1;
    showProductsInsertValue(this.innerText);
    // console.log(paginationArray);
    cratePaginationHTML(paginationArray.length);

    pageBtnClick();
    ChangeColor(paginationCounter);
    colorChangeCategory();
    this.style.color = "red";
  });
}

function CategoryHTML() {
  for (let i = 0; i < category.length; i++) {
    catElement.innerHTML += `
        <div class="cat-box">
        <img src="${category[i].ImgURL}" alt="">
        <p>${category[i].name}</p>
        </div>
        `;
  }
}

function showProductsInsertValue(category) {
  paginationArray = [];
  for (let i = 0; i < items.length; i++) {
    if (items[i].Category == category) {
      paginationArray.push(items[i]);
    }
  }
}

function cratePaginationHTML(length) {
  page = 0;
  if (length % showItems == 0) {
    page = length / showItems;
  } else {
    page = parseInt(length / showItems) + 1;
  }

  let pageHTML = "<div class='prev-btn'>Prev</div>";

  for (let i = 0; i < page; i++) {
    pageHTML += `<div class="page-btn">${i + 1}</div>`;
  }
  pageHTML += "<div class='next-btn'>Next</div>";

  paginationBoxElement.innerHTML = pageHTML;
  showProducts(showItems);
  pageBtn = document.querySelectorAll(".page-btn");
  prevBtn = document.querySelector(".prev-btn");
  nextBtn = document.querySelector(".next-btn");

  // return page;
}

function showProducts(show) {
  itemsBoxElement.innerHTML = "";
  if (paginationCounter == 1) {
    for (let i = 0; i < show; i++) {
      itemsBoxElement.innerHTML += `
        <div class="item">
        <img src="${paginationArray[i].ImgURL}" />
        <p>${paginationArray[i].Name}</p>
        <p><i class="fa-solid fa-indian-rupee-sign"></i> <span>${paginationArray[i].Price}</span></p>
        </div>
        `;
    }
  } else if (paginationCounter == page) {
    for (
      let i = show * (paginationCounter - 1);
      i < paginationArray.length;
      i++
    ) {
      itemsBoxElement.innerHTML += `
        <div class="item">
        <img src="${paginationArray[i].ImgURL}" />
        <p>${paginationArray[i].Name}</p>
        <p><i class="fa-solid fa-indian-rupee-sign"></i> <span>${paginationArray[i].Price}</span></p>
        </div>
        `;
    }
  } else {
    for (
      let i = show * (paginationCounter - 1);
      i < show * paginationCounter;
      i++
    ) {
      itemsBoxElement.innerHTML += `
        <div class="item">
        <img src="${paginationArray[i].ImgURL}" />
        <p>${paginationArray[i].Name}</p>
        <p><i class="fa-solid fa-indian-rupee-sign"></i> <span>${paginationArray[i].Price}</span></p>
        </div>
        `;
    }
  }
}

// console.log(pageBtn.length);

pageBtnClick();

function pageBtnClick() {
  for (let i = 0; i < pageBtn.length; i++) {
    pageBtn[i].addEventListener("click", function () {
      paginationCounter = i + 1;
      ChangeColor(paginationCounter);
      showProducts(showItems);
    });
  }

  prevBtn.addEventListener("click", function () {
    if (paginationCounter > 1) {
      paginationCounter--;
      ChangeColor(paginationCounter);
      showProducts(showItems);
    }
  });

  nextBtn.addEventListener("click", function () {
    if (paginationCounter < page) {
      paginationCounter++;
      ChangeColor(paginationCounter);
      showProducts(showItems);
    }
  });
}

pageBtn[0].style.color = "#fff";
pageBtn[0].style.background = "#000";

function ChangeColor(index) {
  for (let i = 0; i < pageBtn.length; i++) {
    pageBtn[i].style.color = "#000";
    pageBtn[i].style.background = "lightblue";
  }
  pageBtn[index - 1].style.color = "#fff";
  pageBtn[index - 1].style.background = "#000";
}

function colorChangeCategory() {
  for (let i = 0; i < categoryBox.length; i++) {
    categoryBox[i].style.color = "#000";
  }
}
